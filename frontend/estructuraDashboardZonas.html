<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Dashboard - Alarma</title>
  <!-- Bootstrap local -->
  <link rel="stylesheet" href="css/bootstrap.custom.min.css">
  <link rel="stylesheet" href="bootstrap-icons-1.13.1/bootstrap-icons.css">
  <!-- Estilos personalizados -->
  <link rel="stylesheet" href="css/plantillaPrincipal.css">

  <!-- === Estilos del modal === -->
  <style>
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 2000;
    }
    .modal-content-custom {
      background: #fff;
      padding: 25px;
      border-radius: 10px;
      max-width: 420px;
      width: 90%;
      box-shadow: 0 4px 25px rgba(0,0,0,0.3);
      animation: fadeIn 0.2s ease-in-out;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(-10px);}
      to {opacity: 1; transform: translateY(0);}
    }
    .modal-header-custom {
      text-align: center;
      margin-bottom: 15px;
    }
    .modal-header-custom i {
      font-size: 2rem;
      color: #0d6efd;
      margin-bottom: 8px;
    }
    .modal-header-custom h5 {
      margin: 0;
      font-weight: 600;
    }
  </style>
</head>

<body class="bg-light d-flex flex-column min-vh-100">

  <!-- HEADER -->
  <header class="bg-primary text-white py-3 d-flex align-items-center justify-content-between px-4">
    <div class="d-flex align-items-center">
      <button class="btn btn-outline-light d-lg-none me-3" id="toggleSidebar">
        <i class="bi bi-list"></i>
      </button>
      <h1 class="h4 m-0">Alarma</h1>
    </div>
    <div class="d-flex align-items-center">
      <h2 class="h5 m-0 me-2">Dashboard</h2>
      <i class="bi bi-grid fs-5"></i>
    </div>
  </header>

  <!-- MAIN -->
  <main class="flex-fill">
  <div class="d-flex flex-grow-1">
    <!-- SIDEBAR -->
    <aside id="sidebar" class="sidebar bg-dark d-flex flex-column align-items-center py-4 min-vh-100">
      <a href="#" class="my-3"><i class="bi bi-house fs-4 p-4"></i></a>
      <a href="#" class="my-3"><i class="bi bi-person-gear fs-4 p-4"></i></a>
      <a href="#" class="my-3"><i class="bi bi-person fs-4 p-4"></i></a>
      <a href="#" class="my-3"><i class="bi bi-telephone fs-4 p-4"></i></a>
    </aside>

    <!-- CONTENIDO -->
    <div class="flex-grow-1 ms-3">
      <div class="container-fluid py-4">
        <div class="row g-4 justify-content-center">
          <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card luzMala">
              <div class="card-body">
                <div class="d-flex gap-4 align-items-center mb-3">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-house-door me-2 fs-5"></i>
                    <h5 class="card-title mb-0">Zona 1</h5>
                  </div>
                  <div class="text-muted d-flex align-items-center">
                    <i class="bi bi-wifi-off me-2 fs-6"></i>
                    <small>Sin acceso</small>
                  </div>
                </div>
                <p class="card-text">Alguna especie de descripción que no me imagino ahora mismo.</p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex gap-4">
                    <button class="btn btn-secondary bg-secondary text-body btn-sm">Entrar</button>
                    <button class="btn btn-outline-secondary btn-sm edit-btn">Editar</button>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <i class="bi bi-battery-full fs-5"></i>
                    <button class="rounded-circle bg-secondary">
                      <i class="bi bi-power fs-5 rounded-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>


              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card luzMala">
              <div class="card-body">
                <div class="d-flex gap-4 align-items-center mb-3">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-house-door me-2 fs-5"></i>
                    <h5 class="card-title mb-0">Zona 2</h5>
                  </div>
                  <div class="text-muted d-flex align-items-center">
                    <i class="bi bi-wifi-off me-2 fs-6"></i>
                    <small>Sin acceso</small>
                  </div>
                </div>
                <p class="card-text">Alguna especie de descripción que no me imagino ahora mismo.</p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex gap-4">
                    <button class="btn btn-secondary bg-secondary text-body btn-sm">Entrar</button>
                    <button class="btn btn-outline-secondary btn-sm edit-btn">Editar</button>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <i class="bi bi-battery-full fs-5"></i>
                    <button class="rounded-circle bg-secondary">
                      <i class="bi bi-power fs-5 rounded-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card luzMala">
              <div class="card-body">
                <div class="d-flex gap-4 align-items-center mb-3">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-house-door me-2 fs-5"></i>
                    <h5 class="card-title mb-0">Zona 3</h5>
                  </div>
                  <div class="text-muted d-flex align-items-center">
                    <i class="bi bi-wifi-off me-2 fs-6"></i>
                    <small>Sin acceso</small>
                  </div>
                </div>
                <p class="card-text">Alguna especie de descripción que no me imagino ahora mismo.</p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex gap-4">
                    <button class="btn btn-secondary bg-secondary text-body btn-sm">Entrar</button>
                    <button class="btn btn-outline-secondary btn-sm edit-btn">Editar</button>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <i class="bi bi-battery-full fs-5"></i>
                    <button class="rounded-circle bg-secondary">
                      <i class="bi bi-power fs-5 rounded-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card luzMala">
              <div class="card-body">
                <div class="d-flex gap-4 align-items-center mb-3">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-house-door me-2 fs-5"></i>
                    <h5 class="card-title mb-0">Zona 4</h5>
                  </div>
                  <div class="text-muted d-flex align-items-center">
                    <i class="bi bi-wifi-off me-2 fs-6"></i>
                    <small>Sin acceso</small>
                  </div>
                </div>
                <p class="card-text">Alguna especie de descripción que no me imagino ahora mismo.</p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex gap-4">
                    <button class="btn btn-secondary bg-secondary text-body btn-sm">Entrar</button>
                    <button class="btn btn-outline-secondary btn-sm edit-btn">Editar</button>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <i class="bi bi-battery-full fs-5"></i>
                    <button class="rounded-circle bg-secondary">
                      <i class="bi bi-power fs-5 rounded-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card luzMala">
              <div class="card-body">
                <div class="d-flex gap-4 align-items-center mb-3">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-house-door me-2 fs-5"></i>
                    <h5 class="card-title mb-0">Zona 5</h5>
                  </div>
                  <div class="text-muted d-flex align-items-center">
                    <i class="bi bi-wifi-off me-2 fs-6"></i>
                    <small>Sin acceso</small>
                  </div>
                </div>
                <p class="card-text">Alguna especie de descripción que no me imagino ahora mismo.</p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex gap-4">
                    <button class="btn btn-secondary bg-secondary text-body btn-sm">Entrar</button>
                    <button class="btn btn-outline-secondary btn-sm edit-btn">Editar</button>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <i class="bi bi-battery-full fs-5"></i>
                    <button class="rounded-circle bg-secondary">
                      <i class="bi bi-power fs-5 rounded-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card luzMala">
              <div class="card-body">
                <div class="d-flex gap-4 align-items-center mb-3">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-house-door me-2 fs-5"></i>
                    <h5 class="card-title mb-0">Zona 6</h5>
                  </div>
                  <div class="text-muted d-flex align-items-center">
                    <i class="bi bi-wifi-off me-2 fs-6"></i>
                    <small>Sin acceso</small>
                  </div>
                </div>
                <p class="card-text">Alguna especie de descripción que no me imagino ahora mismo.</p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex gap-4">
                    <button class="btn btn-secondary bg-secondary text-body btn-sm">Entrar</button>
                    <button class="btn btn-outline-secondary btn-sm edit-btn">Editar</button>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <i class="bi bi-battery-full fs-5"></i>
                    <button class="rounded-circle bg-secondary">
                      <i class="bi bi-power fs-5 rounded-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card luzMala">
              <div class="card-body">
                <div class="d-flex gap-4 align-items-center mb-3">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-house-door me-2 fs-5"></i>
                    <h5 class="card-title mb-0">Zona 7</h5>
                  </div>
                  <div class="text-muted d-flex align-items-center">
                    <i class="bi bi-wifi-off me-2 fs-6"></i>
                    <small>Sin acceso</small>
                  </div>
                </div>
                <p class="card-text">Alguna especie de descripción que no me imagino ahora mismo.</p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex gap-4">
                    <button class="btn btn-secondary bg-secondary text-body btn-sm">Entrar</button>
                    <button class="btn btn-outline-secondary btn-sm edit-btn">Editar</button>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <i class="bi bi-battery-full fs-5"></i>
                    <button class="rounded-circle bg-secondary">
                      <i class="bi bi-power fs-5 rounded-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

              <div class="col-12 col-sm-6 col-md-4 col-lg-3">
            <div class="card luzMala">
              <div class="card-body">
                <div class="d-flex gap-4 align-items-center mb-3">
                  <div class="d-flex align-items-center">
                    <i class="bi bi-house-door me-2 fs-5"></i>
                    <h5 class="card-title mb-0">Zona 8</h5>
                  </div>
                  <div class="text-muted d-flex align-items-center">
                    <i class="bi bi-wifi-off me-2 fs-6"></i>
                    <small>Sin acceso</small>
                  </div>
                </div>
                <p class="card-text">Alguna especie de descripción que no me imagino ahora mismo.</p>
                <div class="d-flex justify-content-between align-items-center">
                  <div class="d-flex gap-4">
                    <button class="btn btn-secondary bg-secondary text-body btn-sm">Entrar</button>
                    <button class="btn btn-outline-secondary btn-sm edit-btn">Editar</button>
                  </div>
                  <div class="d-flex align-items-center gap-4">
                    <i class="bi bi-battery-full fs-5"></i>
                    <button class="rounded-circle bg-secondary">
                      <i class="bi bi-power fs-5 rounded-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          

        </div>
      </div>
    </div>
  </div>
  </main>

  <!-- FOOTER -->
  <footer class="bg-primary text-white text-center py-2 mt-auto">
    <small class="footer-text">2025 Escuela Técnica N°1 Gral. San Martín Inc. Todos los derechos reservados.</small>
  </footer>

  <!-- === MODAL PARA EDITAR === -->
  <div id="editModal" class="modal-overlay">
    <div class="modal-content-custom">
      <div class="modal-header-custom">
  <i class="bi bi-columns-gap" style="color: black;"></i>
        <h5>Editar zona</h5>
      </div>
      <form id="editForm">
        <div class="mb-3">
          <label class="form-label">Nombre actual</label>
          <input type="text" style="border: solid 1px;" id="currentZoneName" class="form-control" readonly>
        </div>
        <div class="mb-3">
          <label class="form-label">Nuevo nombre</label>
          <input style="border: solid 1px;" type="text" id="newZoneName" class="form-control" placeholder="Escribe el nuevo nombre">
        </div>
        <div class="mb-3">
          <label class="form-label">Descripción</label>
          <textarea id="zoneDescription" style="border: solid 1px;" class="form-control" rows="3" required></textarea>
        </div>
        <div class="d-flex justify-content-end gap-2">
          <button type="button" style="margin-right: 50px;" class="btn btn-primary"  id="cancelEdit">Cancelar</button>
          <button type="submit" class="btn btn-secondary bg-secondary text-body btn-sm" style="margin-right: 75px;">Guardar</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Bootstrap scripts -->
  <script src="js/bootstrap.bundle.min.js"></script>
  <script>
    // Sidebar toggle
    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.getElementById('toggleSidebar');
    toggleBtn.addEventListener('click', () => sidebar.classList.toggle('show'));

    // === Editar zona ===
    const modal = document.getElementById('editModal');
    const cancelEdit = document.getElementById('cancelEdit');
    const form = document.getElementById('editForm');
    const currentName = document.getElementById('currentZoneName');
    const newName = document.getElementById('newZoneName');
    const descInput = document.getElementById('zoneDescription');
    let selectedCard = null;

    // Abrir modal con datos actuales
    document.querySelectorAll('.edit-btn').forEach(btn => {
      btn.addEventListener('click', e => {
        selectedCard = e.target.closest('.card');
        const title = selectedCard.querySelector('.card-title').textContent.trim();
        const desc = selectedCard.querySelector('.card-text').textContent.trim();
        currentName.value = title;
        newName.value = '';
        descInput.value = desc;
        modal.style.display = 'flex';
      });
    });

    // Cerrar modal
    const closeModal = () => {
      modal.style.display = 'none';
      selectedCard = null;
    };
    cancelEdit.addEventListener('click', closeModal);
    modal.addEventListener('click', e => {
      if (e.target === modal) closeModal();
    });
    document.addEventListener('keydown', e => {
      if (e.key === 'Escape' && modal.style.display === 'flex') closeModal();
    });

    // Guardar cambios
    form.addEventListener('submit', e => {
      e.preventDefault();
      if (selectedCard) {
        const nameToSet = newName.value.trim() || currentName.value.trim();
        selectedCard.querySelector('.card-title').textContent = nameToSet;
        selectedCard.querySelector('.card-text').textContent = descInput.value.trim();
      }
      closeModal();
    });
  </script>
</body>
</html>
